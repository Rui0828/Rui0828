name: Generate Snake Animation

on:
    schedule:
        - cron: '30 16 * * *' # 每天 UTC 16:30 (台北 00:30) 執行，在 waka 更新後
    workflow_dispatch: # 支援手動觸發

permissions:
    contents: write

jobs:
    generate:
        runs-on: ubuntu-latest
        timeout-minutes: 5
        steps:
            - name: Generate Snake Animation
              uses: Platane/snk/svg-only@v3
              with:
                  github_user_name: ${{ github.repository_owner }}
                  outputs: |
                      dist/github-snake.svg
                      dist/github-snake-dark.svg?palette=github-dark

            - name: Push to output branch
              uses: crazy-max/ghaction-github-pages@v4
              with:
                  target_branch: output
                  build_dir: dist
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
